<!DOCTYPE html>
<html>

<head>
	<title>JP Radio - music non stop</title>
</head>

<body>
	<h1>Music Player</h1>
	<select id="songList"></select>
	<button onclick="playSong()">Play</button>
	<audio id="audioPlayer" src="http://localhost:8081/" autoplay="false" controls></audio>

	<script>
		console.log('client.js');
		async function loadSongs() {
			console.log('loadSongs');
			let response = await fetch('http://localhost:8080/songs');
			let songs = await response.json();
			let songList = document.getElementById('songList');
			songs.forEach(song => {
				let option = document.createElement('option');
				option.value = song;
				option.textContent = song;
				songList.appendChild(option);
			});
		}

		function playSong() {
			console.log('playSong');
			let song = document.getElementById('songList').value;
			document.getElementById('audioPlayer').src = `http://localhost:8080/stream/${song}`;
		}

		loadSongs();
	</script>
</body>

</html>